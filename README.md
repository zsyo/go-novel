# Go Novel (So Novel Goç‰ˆæœ¬)

è¿™æ˜¯ä¸€ä¸ªç”¨Goè¯­è¨€é‡æ–°å®ç°çš„So Novelå°è¯´ä¸‹è½½å™¨ï¼Œæ—¨åœ¨å‡å°‘æœåŠ¡å™¨èµ„æºå ç”¨ï¼ŒåŒæ—¶å°½é‡ä¿æŒä¸åŸJavaç‰ˆæœ¬ç›¸åŒçš„è§„åˆ™å…¼å®¹æ€§ã€‚

> âš ï¸ **é‡è¦å£°æ˜**ï¼šæœ¬é¡¹ç›®æ˜¯åŸºäº [freeok/so-novel](https://github.com/freeok/so-novel) (Javaç‰ˆæœ¬) é‡æ„çš„Goè¯­è¨€ç‰ˆæœ¬ã€‚åŸé¡¹ç›®é‡‡ç”¨ [GNU Affero General Public License v3.0](https://github.com/freeok/so-novel/blob/main/LICENSE) å¼€æºåè®®ã€‚æ ¹æ®AGPL-3.0è®¸å¯è¯çš„è¦æ±‚ï¼Œæœ¬é¡¹ç›®ä¹Ÿå¿…é¡»é‡‡ç”¨ç›¸åŒçš„è®¸å¯è¯ã€‚

> â— **å…è´£æç¤º**ï¼šæœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ä¸æŠ€æœ¯ç ”ç©¶ä½¿ç”¨ã€‚ä½¿ç”¨å‰è¯·è®¤çœŸé˜…è¯»[æ³•å¾‹å…è´£å£°æ˜](#æ³•å¾‹å…è´£å£°æ˜-legal-disclaimer)ï¼Œå¹¶ç¡®ä¿éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ã€‚

## ç‰¹æ€§

- ğŸ“š èšåˆæœç´¢ï¼šæ”¯æŒä»å¤šä¸ªå°è¯´æºæœç´¢ä¹¦ç±
- âš¡ é«˜æ€§èƒ½ï¼šä½¿ç”¨Goè¯­è¨€å®ç°ï¼Œèµ„æºå ç”¨æ›´å°‘
- ğŸŒ Webç•Œé¢ï¼šæä¾›å‹å¥½çš„Webç”¨æˆ·ç•Œé¢
- ğŸ“– å¤šæ ¼å¼æ”¯æŒï¼šæ”¯æŒEPUBã€TXTæ ¼å¼
- ğŸ”§ è§„åˆ™å…¼å®¹ï¼šå…¼å®¹åŸJavaç‰ˆæœ¬çš„è§„åˆ™æ–‡ä»¶
- ğŸ”„ å®æ—¶è¿›åº¦ï¼šä½¿ç”¨SSEï¼ˆServer-Sent Eventsï¼‰å®æ—¶æ˜¾ç¤ºä¸‹è½½è¿›åº¦
- âš™ï¸ çµæ´»é…ç½®ï¼šæ”¯æŒä¸°å¯Œçš„é…ç½®é€‰é¡¹ï¼ŒåŒ…æ‹¬ä»£ç†ã€é™æµç­‰

## æŠ€æœ¯æ ˆ

- **åç«¯**: Go + Ginæ¡†æ¶
- **å‰ç«¯**: HTML + CSS + åŸç”ŸJavaScript
- **å®æ—¶é€šä¿¡**: SSE (Server-Sent Events)
- **é…ç½®ç®¡ç†**: Viper
- **HTMLè§£æ**: GoQuery
- **EPUBç”Ÿæˆ**: go-epubåº“

## åµŒå…¥èµ„æºæœºåˆ¶

æœ¬é¡¹ç›®é‡‡ç”¨Goè¯­è¨€çš„`embed`ç‰¹æ€§ï¼Œå°†é…ç½®æ–‡ä»¶ã€è§„åˆ™æ–‡ä»¶å’Œé™æ€èµ„æºç›´æ¥åµŒå…¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚è¿™ç§è®¾è®¡æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

1. **é›¶ä¾èµ–éƒ¨ç½²**ï¼šå¯æ‰§è¡Œæ–‡ä»¶åŒ…å«æ‰€æœ‰å¿…è¦èµ„æºï¼Œæ— éœ€é¢å¤–çš„é…ç½®æ–‡ä»¶å³å¯è¿è¡Œ
2. **è‡ªåŠ¨æ¢å¤**ï¼šå½“å¤–éƒ¨é…ç½®æ–‡ä»¶ç¼ºå¤±æ—¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨ä½¿ç”¨åµŒå…¥çš„é»˜è®¤é…ç½®
3. **ä¼˜å…ˆçº§æœºåˆ¶**ï¼šå½“å¤–éƒ¨é…ç½®æ–‡ä»¶å­˜åœ¨æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨å¤–éƒ¨æ–‡ä»¶ï¼Œä¾¿äºç”¨æˆ·è‡ªå®šä¹‰

### åµŒå…¥èµ„æºè¯´æ˜

- **é…ç½®æ–‡ä»¶**ï¼š`configs/config.ini` åŒ…å«ç¨‹åºè¿è¡Œçš„åŸºæœ¬é…ç½®
- **è§„åˆ™æ–‡ä»¶**ï¼š`configs/rules/` ç›®å½•ä¸‹çš„æ‰€æœ‰JSONæ–‡ä»¶ï¼Œå®šä¹‰äº†å°è¯´æºçš„çˆ¬å–è§„åˆ™
- **é™æ€èµ„æº**ï¼š`internal/embed/static/` ç›®å½•ä¸‹çš„Webç•Œé¢æ–‡ä»¶ï¼ˆHTMLã€CSSã€å›¾æ ‡ç­‰ï¼‰

### è¿è¡Œæ—¶è¡Œä¸º

1. ç¨‹åºå¯åŠ¨æ—¶ä¼šæ£€æŸ¥ `configs/` ç›®å½•æ˜¯å¦å­˜åœ¨é…ç½®æ–‡ä»¶
2. å¦‚æœé…ç½®æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨å¤–éƒ¨æ–‡ä»¶
3. å¦‚æœé…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨åµŒå…¥çš„é»˜è®¤æ–‡ä»¶, å¹¶ç”Ÿæˆé»˜è®¤çš„é…ç½®æ–‡ä»¶
4. è¿™ç§æœºåˆ¶ç¡®ä¿ç¨‹åºåœ¨ä»»ä½•ç¯å¢ƒä¸‹éƒ½èƒ½æ­£å¸¸è¿è¡Œï¼ŒåŒæ—¶ä¿ç•™äº†ç”¨æˆ·è‡ªå®šä¹‰é…ç½®çš„èƒ½åŠ›

## ç›®å½•ç»“æ„

```
go-novel/
â”œâ”€â”€ assets/            # èµ„æºæ–‡ä»¶
    â”œâ”€â”€ configs.tar.gz # é»˜è®¤é…ç½®å’Œè§„åˆ™æ–‡ä»¶
â”‚   â””â”€â”€ webui-preview.jpg # Web UI é¢„è§ˆå›¾
â”œâ”€â”€ configs/           # é…ç½®æ–‡ä»¶ï¼ˆè¿è¡Œæ—¶ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ config.ini     # ä¸»é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ rules/         # è§„åˆ™æ–‡ä»¶
â”œâ”€â”€ internal/          # å†…éƒ¨æ¨¡å—
â”‚   â”œâ”€â”€ config/        # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ core/          # æ ¸å¿ƒçˆ¬è™«é€»è¾‘
â”‚   â”œâ”€â”€ embed/         # åµŒå…¥èµ„æº
â”‚   â”‚   â”œâ”€â”€ embed.go   # åµŒå…¥çš„é…ç½®ã€è§„åˆ™å’Œé™æ€æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ configs/   # åµŒå…¥æ–‡ä»¶çš„æºæ–‡ä»¶ï¼ˆç¼–è¯‘æ—¶ä½¿ç”¨ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ config.ini
â”‚   â”‚   â”‚   â””â”€â”€ rules/
â”‚   â”‚   â””â”€â”€ static/    # åµŒå…¥çš„é™æ€æ–‡ä»¶æºæ–‡ä»¶ï¼ˆç¼–è¯‘æ—¶ä½¿ç”¨ï¼‰
â”‚   â”‚       â”œâ”€â”€ css/
â”‚   â”‚       â”œâ”€â”€ favicon.ico
â”‚   â”‚       â””â”€â”€ index.html
â”‚   â”œâ”€â”€ handler/       # HTTPè¯·æ±‚å¤„ç†
â”‚   â”œâ”€â”€ model/         # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ rules/         # è§„åˆ™ç®¡ç†
â”‚   â”œâ”€â”€ sse/           # SSEå®æ—¶é€šä¿¡
â”‚   â”œâ”€â”€ util/          # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ web/           # WebæœåŠ¡å™¨
â”œâ”€â”€ downloads/         # ä¸‹è½½æ–‡ä»¶ç›®å½•
â”œâ”€â”€ go.mod             # Goæ¨¡å—æ–‡ä»¶
â”œâ”€â”€ go.sum             # Goä¾èµ–æ ¡éªŒæ–‡ä»¶
â”œâ”€â”€ main.go            # ç¨‹åºå…¥å£
â””â”€â”€ README.md          # è¯´æ˜æ–‡æ¡£
```

## å®‰è£…ä¸è¿è¡Œ

### ç¯å¢ƒè¦æ±‚

- Go 1.25+
- Git

### å®‰è£…æ­¥éª¤

1. å…‹éš†é¡¹ç›®ï¼š
   ```bash
   git clone https://github.com/zsyo/go-novel
   cd go-novel
   ```

2. åˆå§‹åŒ–Goæ¨¡å—ï¼š
   ```bash
   go mod tidy
   ```

3. è¿è¡Œç¨‹åºï¼š
   ```bash
   go run main.go
   ```

4. è®¿é—®Webç•Œé¢ï¼š
   æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:7765`

## Dockeréƒ¨ç½²

é¡¹ç›®æä¾›äº† [build-docker.sh](build-docker.sh) è„šæœ¬ç”¨äºæ„å»ºDockeré•œåƒï¼Œè¯¥è„šæœ¬ä¼šè‡ªåŠ¨ç¼–è¯‘Goç¨‹åºå¹¶æ„å»ºæœ€å°åŒ–çš„Dockeré•œåƒã€‚

### ç¯å¢ƒè¦æ±‚

- Docker
- Go 1.25+ (ç”¨äºç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶)
- UPX (å¯é€‰ï¼Œç”¨äºå‹ç¼©äºŒè¿›åˆ¶æ–‡ä»¶)

### æ„å»ºæ­¥éª¤

è¿è¡Œ [build-docker.sh](build-docker.sh) è„šæœ¬å³å¯è‡ªåŠ¨å®Œæˆç¼–è¯‘å’Œæ„å»ºï¼š

```bash
./build-docker.sh
```

è„šæœ¬å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
1. ç¼–è¯‘Goç¨‹åºä¸ºLinuxå¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶
2. ä½¿ç”¨UPXå‹ç¼©äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå¦‚æœå·²å®‰è£…UPXï¼‰
3. æ„å»ºDockeré•œåƒ
4. æ¸…ç†ä¸´æ—¶æ–‡ä»¶

### è¿è¡Œå®¹å™¨

æ„å»ºå®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œå®¹å™¨ï¼š

```
# åŸºæœ¬è¿è¡Œ
docker run -d --user=$(id -u):$(id -g) -p 7765:7765 --name go-novel go-novel:latest

# æŒ‚è½½æœ¬åœ°é…ç½®ç›®å½•
docker run -d \
   --user=$(id -u):$(id -g) \
   -p 7765:7765 \
   -v $(pwd)/configs:/app/configs \
   --name go-novel \
   go-novel:latest

# æŒ‚è½½æœ¬åœ°ä¸‹è½½ç›®å½•
docker run -d \
   --user=$(id -u):$(id -g) \
   -p 7765:7765 \
   -v $(pwd)/downloads:/app/downloads \
   --name go-novel \
   go-novel:latest

# åŒæ—¶æŒ‚è½½é…ç½®å’Œä¸‹è½½ç›®å½•
docker run -d \
   --user=$(id -u):$(id -g) \
   -p 7765:7765 \
   -v $(pwd)/configs:/app/configs \
   -v $(pwd)/downloads:/app/downloads \
   --name go-novel \
   go-novel:latest

# åŒæ—¶æŒ‚è½½é…ç½®å’Œä¸‹è½½ç›®å½•ï¼ˆç²¾ç»†æŒ‚è½½é…ç½®ã€è§„åˆ™ç›®å½•ï¼‰
docker run -d \
   --user=$(id -u):$(id -g) \
   -p 7765:7765 \
   -v $(pwd)/configs/config.ini:/app/configs/config.ini \
   -v $(pwd)/configs/rules:/app/configs/rules \
   -v $(pwd)/downloads:/app/downloads \
   --name go-novel \
   go-novel:latest
```

### ä½¿ç”¨é¢„æ„å»ºçš„Dockeré•œåƒ

ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå·²ç»æ„å»ºäº†Dockeré•œåƒå¹¶æ¨é€åˆ°äº†Docker Hub(ä»…æ”¯æŒlinux amd64æ¶æ„)ï¼Œåœ°å€æ˜¯ï¼š[https://hub.docker.com/r/zsyo/go-novel](https://hub.docker.com/r/zsyo/go-novel)

***æ–°å¢***: æ–°å¢github Actionè‡ªåŠ¨æ„å»ºå®¹å™¨(æ”¯æŒlinux amd64æ¶æ„å’Œarm64æ¶æ„) [https://ghcr.io/zsyo/go-novel](https://ghcr.io/zsyo/go-novel)

**æ³¨æ„**ï¼šå¦‚éœ€æŒ‚è½½é…ç½®å’Œè§„åˆ™,è¯·é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¸‹è½½é…ç½®æ–‡ä»¶å‹ç¼©åŒ…å¹¶è§£å‹ã€‚
```bash
wget https://raw.githubusercontent.com/zsyo/go-novel/main/assets/configs.tar.gz

tar -zxvf configs.tar.gz
```

ä½¿ç”¨é¢„æ„å»ºé•œåƒçš„éƒ¨ç½²å‘½ä»¤ç¤ºä¾‹ï¼š

```
# åŸºæœ¬è¿è¡Œ
  dockerHubç‰ˆ:
    docker run -d -p 7765:7765 --name go-novel zsyo/go-novel:latest
  ghcr.ioç‰ˆ:
    docker run -d -p 7765:7765 --name go-novel ghcr.io/zsyo/go-novel:latest

# æŒ‚è½½æœ¬åœ°é…ç½®ç›®å½•
  dockerHubç‰ˆ:
    docker run -d \
      --user=$(id -u):$(id -g) \
      -p 7765:7765 \
      -v $(pwd)/configs:/app/configs \
      --name go-novel \
      zsyo/go-novel:latest
  ghcr.ioç‰ˆ:
    docker run -d \
      --user=$(id -u):$(id -g) \
      -p 7765:7765 \
      -v $(pwd)/configs:/app/configs \
      --name go-novel \
      ghcr.io/zsyo/go-novel:latest

# æŒ‚è½½æœ¬åœ°ä¸‹è½½ç›®å½•
  dockerHubç‰ˆ:
    docker run -d \
      --user=$(id -u):$(id -g) \
      -p 7765:7765 \
      -v $(pwd)/downloads:/app/downloads \
      --name go-novel \
      zsyo/go-novel:latest
  ghcr.ioç‰ˆ:
    docker run -d \
      --user=$(id -u):$(id -g) \
      -p 7765:7765 \
      -v $(pwd)/downloads:/app/downloads \
      --name go-novel \
      ghcr.io/zsyo/go-novel:latest

# åŒæ—¶æŒ‚è½½é…ç½®å’Œä¸‹è½½ç›®å½•
  dockerHubç‰ˆ:
    docker run -d \
      --user=$(id -u):$(id -g) \
      -p 7765:7765 \
      -v $(pwd)/configs:/app/configs \
      -v $(pwd)/downloads:/app/downloads \
      --name go-novel \
      zsyo/go-novel:latest
  ghcr.ioç‰ˆ:
    docker run -d \
      --user=$(id -u):$(id -g) \
      -p 7765:7765 \
      -v $(pwd)/configs:/app/configs \
      -v $(pwd)/downloads:/app/downloads \
      --name go-novel \
      ghcr.io/zsyo/go-novel:latest

# åŒæ—¶æŒ‚è½½é…ç½®å’Œä¸‹è½½ç›®å½•ï¼ˆç²¾ç»†æŒ‚è½½é…ç½®ã€è§„åˆ™ç›®å½•ï¼‰
  dockerHubç‰ˆ:
    docker run -d \
      --user=$(id -u):$(id -g) \
      -p 7765:7765 \
      -v $(pwd)/configs/config.ini:/app/configs/config.ini \
      -v $(pwd)/configs/rules:/app/configs/rules \
      -v $(pwd)/downloads:/app/downloads \
      --name go-novel \
      zsyo/go-novel:latest
  ghcr.ioç‰ˆ:
    docker run -d \
      --user=$(id -u):$(id -g) \
      -p 7765:7765 \
      -v $(pwd)/configs/config.ini:/app/configs/config.ini \
      -v $(pwd)/configs/rules:/app/configs/rules \
      -v $(pwd)/downloads:/app/downloads \
      --name go-novel \
      ghcr.io/zsyo/go-novel:latest
```

### Dockeré•œåƒè¯´æ˜

Dockeré•œåƒåŸºäºAlpine Linuxæ„å»ºï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š
- ä½¿ç”¨æœ€å°åŒ–çš„Alpine Linuxä½œä¸ºåŸºç¡€é•œåƒ
- åˆ›å»ºérootç”¨æˆ·è¿è¡Œç¨‹åºï¼Œæé«˜å®‰å…¨æ€§
- åŒ…å«HTTPSæ”¯æŒæ‰€éœ€çš„ca-certificates
- æš´éœ²7765ç«¯å£ç”¨äºWebæœåŠ¡

## Web UI ç•Œé¢é¢„è§ˆ

ä»¥ä¸‹æ˜¯æœ¬é¡¹ç›®çš„Web UIç•Œé¢é¢„è§ˆï¼š

<p align="center">
  <img src="assets/webui-preview.webp" alt="Web UI æœç´¢ç•Œé¢" width="49%" />
  <img src="assets/webui-downloading.webp" alt="Web UI ä¸‹è½½ç•Œé¢" width="49%" />
</p>

<p align="center">
  <em>å·¦: Web UI æœç´¢ç•Œé¢ | å³: Web UI ä¸‹è½½ç•Œé¢</em>
</p>

ç•Œé¢åŠŸèƒ½åŒ…æ‹¬ï¼š
1. **ä¹¦ç±æœç´¢**ï¼šåœ¨æœç´¢æ¡†ä¸­è¾“å…¥ä¹¦åæˆ–ä½œè€…åï¼Œç‚¹å‡»æœç´¢æŒ‰é’®è¿›è¡Œèšåˆæœç´¢
2. **ä¹¦ç±ä¸‹è½½**ï¼šåœ¨æœç´¢ç»“æœä¸­é€‰æ‹©ä¹¦ç±ï¼Œç‚¹å‡»ä¸‹è½½æŒ‰é’®å¼€å§‹ä¸‹è½½
3. **æœ¬åœ°ä¹¦ç±ç®¡ç†**ï¼šæŸ¥çœ‹å·²ä¸‹è½½çš„ä¹¦ç±åˆ—è¡¨ï¼Œæ”¯æŒä¸‹è½½å’Œåˆ é™¤æ“ä½œ
4. **å®æ—¶è¿›åº¦æ˜¾ç¤º**ï¼šä¸‹è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºå®æ—¶è¿›åº¦æ¡

## é…ç½®è¯´æ˜

é…ç½®æ–‡ä»¶ä½äº `configs/config.ini`ï¼š

```ini
[download]
# ä¸‹è½½è·¯å¾„ï¼Œç»å¯¹/ç›¸å¯¹è·¯å¾„å‡å¯
download-path = downloads
# æ–‡ä»¶æ‰©å±•å (å¯é€‰å€¼ï¼šepub, txtï¼Œæ¨è epub)
extname = epub
# ä¸‹è½½å®Œæˆåæ˜¯å¦ä¿ç•™ç« èŠ‚ç¼“å­˜æ–‡ä»¶å¤¹ (1 æ˜¯ï¼Œ0 å¦)
preserve-chapter-cache = 0

[source]
# ä¹¦ç±å†…å®¹è¯­è¨€ (é»˜è®¤è‡ªåŠ¨è·å–ï¼Œå¯é€‰å€¼ï¼šzh_CN, zh_TW, zh_Hant)
language =
# æŒ‡å®šè§„åˆ™æ–‡ä»¶ï¼Œç»å¯¹/ç›¸å¯¹è·¯å¾„å‡å¯
active-rules = main-rules.json
# æŒ‡å®šå½“å‰æ¿€æ´»è§„åˆ™ä¸­çš„æŸä¸ªä¹¦æºï¼Œç”¨äºæŒ‡å®šæœç´¢ã€æ‰¹é‡ä¸‹è½½ (å¡«å†™ä¹¦æº ID)
source-id = -1
# æ¯ä¸ªä¹¦æºåªæ˜¾ç¤ºå‰ N æ¡æœç´¢è®°å½• (é»˜è®¤ä¸ºå…¨éƒ¨)
search-limit = 10

[crawl]
# çˆ¬å–çº¿ç¨‹æ•°ï¼Œ-1 è¡¨ç¤ºè‡ªåŠ¨è®¾ç½®
threads = -1
# çˆ¬å–æœ€å°é—´éš” (æ¯«ç§’)
min-interval = 200
# çˆ¬å–æœ€å¤§é—´éš” (æ¯«ç§’)
max-interval = 400
# æ˜¯å¦å¯ç”¨é‡è¯•ï¼Œä¸å¯ç”¨åˆ™ä¸‹è½½å‡ºé”™æ—¶ä¸­æ–­ä¸‹è½½ (1 æ˜¯ï¼Œ0 å¦)
enable-retry = 1
# æœ€å¤§é‡è¯•æ¬¡æ•° (é’ˆå¯¹é¦–æ¬¡ä¸‹è½½å¤±è´¥çš„ç« èŠ‚)
max-retries = 5
# é‡è¯•çˆ¬å–æœ€å°é—´éš” (æ¯«ç§’)
retry-min-interval = 2000
# é‡è¯•çˆ¬å–æœ€å¤§é—´éš” (æ¯«ç§’)
retry-max-interval = 4000

[web]
# æ˜¯å¦å¼€å¯ Web æœåŠ¡ (1 æ˜¯ï¼Œ0 å¦)
enabled = 1
# Web æœåŠ¡ç«¯å£
port = 7765

[proxy]
# æ˜¯å¦å¯ç”¨ HTTP ä»£ç† (é’ˆå¯¹éœ€è¦ä»£ç†çš„ä¹¦æºã€‚1 å¼€ï¼Œ0 å…³)
enabled = 0
host = 127.0.0.1
port = 8118
```

## è§„åˆ™æ–‡ä»¶

è§„åˆ™æ–‡ä»¶ä½äº `configs/rules/` ç›®å½•ä¸‹ï¼Œå…¼å®¹åŸJavaç‰ˆæœ¬çš„JSONæ ¼å¼è§„åˆ™ã€‚

æ”¯æŒçš„è§„åˆ™ç±»å‹ï¼š
- `main-rules.json` - ä¸»è¦è§„åˆ™æ–‡ä»¶
- `flowlimit-rules.json` - é™æµè§„åˆ™
- `non-searchable-rules.json` - ä¸æ”¯æŒæœç´¢çš„è§„åˆ™
- `proxy-rules.json` - éœ€è¦ä»£ç†çš„è§„åˆ™

## APIæ¥å£

- `GET /api/search/aggregated` - èšåˆæœç´¢
- `GET /api/book/fetch` - è·å–ä¹¦ç±
- `GET /api/book/download` - ä¸‹è½½ä¹¦ç±
- `GET /api/local/books` - è·å–æœ¬åœ°ä¹¦ç±åˆ—è¡¨
- `DELETE /api/book` - åˆ é™¤ä¹¦ç±
- `GET /sse/book/progress` - SSEè¿›åº¦é€šçŸ¥

## SSEå®æ—¶è¿›åº¦é€šçŸ¥

æœ¬é¡¹ç›®ä½¿ç”¨SSEï¼ˆServer-Sent Eventsï¼‰å®ç°å®æ—¶è¿›åº¦é€šçŸ¥ï¼Œé€šè¿‡ `/sse/book/progress` ç«¯ç‚¹æ¨é€ä¸‹è½½è¿›åº¦ã€‚

## Webç•Œé¢åŠŸèƒ½

1. **ä¹¦ç±æœç´¢**ï¼šåœ¨æœç´¢æ¡†ä¸­è¾“å…¥ä¹¦åæˆ–ä½œè€…åï¼Œç‚¹å‡»æœç´¢æŒ‰é’®è¿›è¡Œèšåˆæœç´¢
2. **ä¹¦ç±ä¸‹è½½**ï¼šåœ¨æœç´¢ç»“æœä¸­é€‰æ‹©ä¹¦ç±ï¼Œç‚¹å‡»ä¸‹è½½æŒ‰é’®å¼€å§‹ä¸‹è½½
3. **æœ¬åœ°ä¹¦ç±ç®¡ç†**ï¼šæŸ¥çœ‹å·²ä¸‹è½½çš„ä¹¦ç±åˆ—è¡¨ï¼Œæ”¯æŒä¸‹è½½å’Œåˆ é™¤æ“ä½œ
4. **å®æ—¶è¿›åº¦æ˜¾ç¤º**ï¼šä¸‹è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºå®æ—¶è¿›åº¦æ¡

## å¼€å‘è®¡åˆ’

- [x] åŸºç¡€WebæœåŠ¡å™¨
- [x] é…ç½®ç®¡ç†
- [x] è§„åˆ™è§£æ
- [x] HTTPè¯·æ±‚å¤„ç†
- [x] SSEå®æ—¶é€šä¿¡
- [x] æ ¸å¿ƒçˆ¬è™«é€»è¾‘å®ç°
- [x] æ–‡ä»¶ä¸‹è½½ä¸ä¿å­˜
- [x] å®Œæ•´åŠŸèƒ½æµ‹è¯•

## æ³•å¾‹å…è´£å£°æ˜ (Legal Disclaimer)

åœ¨ä½¿ç”¨æœ¬å·¥å…·å‰ï¼Œè¯·åŠ¡å¿…ä»”ç»†é˜…è¯»æˆ‘ä»¬çš„[æ³•å¾‹å…è´£å£°æ˜](DISCLAIMER.md)ã€‚ä½¿ç”¨æœ¬å·¥å…·å³è¡¨ç¤ºæ‚¨å·²é˜…è¯»ã€ç†è§£å¹¶åŒæ„éµå®ˆæ‰€æœ‰æ¡æ¬¾ã€‚

## è®¸å¯è¯

GNU Affero General Public License v3.0

æœ¬é¡¹ç›®æ˜¯ [freeok/so-novel](https://github.com/freeok/so-novel) çš„Goè¯­è¨€é‡æ„ç‰ˆæœ¬ï¼ŒåŸé¡¹ç›®é‡‡ç”¨ AGPL-3.0 è®¸å¯è¯ã€‚æ ¹æ® AGPL-3.0 è®¸å¯è¯çš„è¦æ±‚ï¼š

1. å¦‚æœæ‚¨ä¿®æ”¹äº†æœ¬é¡¹ç›®çš„æºä»£ç å¹¶éƒ¨ç½²åœ¨ç½‘ç»œæœåŠ¡å™¨ä¸Šä¾›ä»–äººä½¿ç”¨ï¼Œæ‚¨å¿…é¡»å…¬å¼€ä¿®æ”¹åçš„æºä»£ç ã€‚
2. æ‚¨å¯ä»¥è‡ªç”±ä½¿ç”¨ã€å¤åˆ¶ã€ä¿®æ”¹å’Œåˆ†å‘æœ¬è½¯ä»¶ï¼Œä½†å¿…é¡»åŒ…å«åŸå§‹ç‰ˆæƒå£°æ˜å’Œè®¸å¯è¯æ–‡æœ¬ã€‚
3. æœ¬è½¯ä»¶æŒ‰"åŸæ ·"æä¾›ï¼Œä¸æä¾›ä»»ä½•æ˜ç¤ºæˆ–æš—ç¤ºçš„æ‹…ä¿ã€‚

å®Œæ•´çš„è®¸å¯è¯æ–‡æœ¬è¯·å‚è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

**æ³¨æ„**ï¼šç”±äºAGPL-3.0è®¸å¯è¯çš„ä¼ æŸ“æ€§ï¼Œå¦‚æœæ‚¨åœ¨ç½‘ç»œæœåŠ¡å™¨ä¸Šä½¿ç”¨æˆ–ä¿®æ”¹æœ¬è½¯ä»¶ï¼Œæ‚¨éœ€è¦ï¼š
- å…¬å¼€æ‚¨å¯¹æœ¬è½¯ä»¶æ‰€åšçš„ä»»ä½•ä¿®æ”¹
- å¦‚æœæ‚¨çš„é¡¹ç›®æ˜¯ä¸“æœ‰è½¯ä»¶æˆ–ä½¿ç”¨ä¸å…¼å®¹çš„è®¸å¯è¯ï¼Œæ‚¨å¯èƒ½éœ€è¦å¯»æ±‚æ³•å¾‹å»ºè®®

## ç¬¬ä¸‰æ–¹ä¾èµ–

|    åº“å    |    è®¸å¯è¯ç±»å‹    |   è®¸å¯è¯é“¾æ¥   |
|:-----------|:----------------:|:--------------:|
| github.com/PuerkitoBio/goquery | BSD-3-Clause | [æŸ¥çœ‹](https://github.com/PuerkitoBio/goquery/blob/v1.10.3/LICENSE) |
| github.com/andybalholm/cascadia | BSD-2-Clause | [æŸ¥çœ‹](https://github.com/andybalholm/cascadia/blob/v1.3.3/LICENSE) |
| github.com/antchfx/htmlquery | MIT | [æŸ¥çœ‹](https://github.com/antchfx/htmlquery/blob/v1.3.4/LICENSE) |
| github.com/antchfx/xpath | MIT | [æŸ¥çœ‹](https://github.com/antchfx/xpath/blob/v1.3.5/LICENSE) |
| github.com/bmaupin/go-epub | MIT | [æŸ¥çœ‹](https://github.com/bmaupin/go-epub/blob/v1.1.0/LICENSE) |
| github.com/dlclark/regexp2 | MIT | [æŸ¥çœ‹](https://github.com/dlclark/regexp2/blob/v1.11.5/LICENSE) |
| github.com/dop251/goja | MIT | [æŸ¥çœ‹](https://github.com/dop251/goja/blob/58d95d85e994/LICENSE) |
| github.com/dop251/goja/ftoa/internal/fast | BSD-3-Clause | [æŸ¥çœ‹](https://github.com/dop251/goja/blob/58d95d85e994/ftoa/internal/fast/LICENSE_V8) |
| github.com/fsnotify/fsnotify | BSD-3-Clause | [æŸ¥çœ‹](https://github.com/fsnotify/fsnotify/blob/v1.9.0/LICENSE) |
| github.com/gabriel-vasile/mimetype | MIT | [æŸ¥çœ‹](https://github.com/gabriel-vasile/mimetype/blob/v1.4.10/LICENSE) |
| github.com/gin-contrib/sse | MIT | [æŸ¥çœ‹](https://github.com/gin-contrib/sse/blob/v1.1.0/LICENSE) |
| github.com/gin-gonic/gin | MIT | [æŸ¥çœ‹](https://github.com/gin-gonic/gin/blob/v1.10.1/LICENSE) |
| github.com/go-playground/locales | MIT | [æŸ¥çœ‹](https://github.com/go-playground/locales/blob/v0.14.1/LICENSE) |
| github.com/go-playground/universal-translator | MIT | [æŸ¥çœ‹](https://github.com/go-playground/universal-translator/blob/v0.18.1/LICENSE) |
| github.com/go-playground/validator/v10 | MIT | [æŸ¥çœ‹](https://github.com/go-playground/validator/blob/v10.27.0/LICENSE) |
| github.com/go-sourcemap/sourcemap | BSD-2-Clause | [æŸ¥çœ‹](https://github.com/go-sourcemap/sourcemap/blob/v2.1.4/LICENSE) |
| github.com/gofrs/uuid | MIT | [æŸ¥çœ‹](https://github.com/gofrs/uuid/blob/v4.4.0/LICENSE) |
| github.com/golang/groupcache/lru | Apache-2.0 | [æŸ¥çœ‹](https://github.com/golang/groupcache/blob/2c02b8208cf8/LICENSE) |
| github.com/google/pprof/profile | Apache-2.0 | [æŸ¥çœ‹](https://github.com/google/pprof/blob/f64d9cf942d6/LICENSE) |
| github.com/hashicorp/hcl | MPL-2.0 | [æŸ¥çœ‹](https://github.com/hashicorp/hcl/blob/v1.0.0/LICENSE) |
| github.com/leodido/go-urn | MIT | [æŸ¥çœ‹](https://github.com/leodido/go-urn/blob/v1.4.0/LICENSE) |
| github.com/magiconair/properties | BSD-2-Clause | [æŸ¥çœ‹](https://github.com/magiconair/properties/blob/v1.8.7/LICENSE.md) |
| github.com/mattn/go-isatty | MIT | [æŸ¥çœ‹](https://github.com/mattn/go-isatty/blob/v0.0.20/LICENSE) |
| github.com/mitchellh/mapstructure | MIT | [æŸ¥çœ‹](https://github.com/mitchellh/mapstructure/blob/v1.5.0/LICENSE) |
| github.com/pelletier/go-toml/v2 | MIT | [æŸ¥çœ‹](https://github.com/pelletier/go-toml/blob/v2.2.4/LICENSE) |
| github.com/sagikazarmark/slog-shim | BSD-3-Clause | [æŸ¥çœ‹](https://github.com/sagikazarmark/slog-shim/blob/v0.1.0/LICENSE) |
| github.com/spf13/afero | Apache-2.0 | [æŸ¥çœ‹](https://github.com/spf13/afero/blob/v1.14.0/LICENSE.txt) |
| github.com/spf13/cast | MIT | [æŸ¥çœ‹](https://github.com/spf13/cast/blob/v1.9.2/LICENSE) |
| github.com/spf13/pflag | BSD-3-Clause | [æŸ¥çœ‹](https://github.com/spf13/pflag/blob/v1.0.7/LICENSE) |
| github.com/spf13/viper | MIT | [æŸ¥çœ‹](https://github.com/spf13/viper/blob/v1.19.0/LICENSE) |
| github.com/subosito/gotenv | MIT | [æŸ¥çœ‹](https://github.com/subosito/gotenv/blob/v1.6.0/LICENSE) |
| github.com/ugorji/go/codec | MIT | [æŸ¥çœ‹](https://github.com/ugorji/go/blob/codec/v1.3.0/codec/LICENSE) |
| github.com/vincent-petithory/dataurl | MIT | [æŸ¥çœ‹](https://github.com/vincent-petithory/dataurl/blob/v1.0.0/LICENSE) |
| golang.org/x/crypto/sha3 | BSD-3-Clause | æ—  |
| golang.org/x/net | BSD-3-Clause | æ—  |
| golang.org/x/sys | BSD-3-Clause | æ—  |
| golang.org/x/text | BSD-3-Clause | æ—  |
| google.golang.org/protobuf | BSD-3-Clause | æ—  |
| gopkg.in/ini.v1 | Apache-2.0 | [æŸ¥çœ‹](https://github.com/go-ini/ini/blob/v1.67.0/LICENSE) |
| gopkg.in/yaml.v3 | MIT | [æŸ¥çœ‹](https://github.com/go-yaml/yaml/blob/v3.0.1/LICENSE) |
